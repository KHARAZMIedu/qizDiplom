<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø±Ú©Ø² Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø®ÙˆØ§Ø±Ø²Ù…ÛŒ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #1a5f7a;
            --secondary-color: #159895;
            --accent-color: #ffc107;
            --nav-prev-color: #2196F3;
            --nav-next-color: #9C27B0;
            --light-color: #f8f9fa;
            --dark-color: #2c3e50;
            --success-color: #2ecc71;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --info-color: #3498db;
            --answered-color: #6c757d;
            --blackwhite-color: #333;
            --gradient-primary: linear-gradient(135deg, var(--primary-color), #159895, #57c4b0);
            --gradient-success: linear-gradient(135deg, var(--success-color), #27ae60);
            --gradient-danger: linear-gradient(135deg, var(--danger-color), #c0392b);
            --gradient-accent: linear-gradient(135deg, var(--accent-color), #ff9800);
            --gradient-answered: linear-gradient(135deg, #6c757d, #495057);
            --gradient-nav-prev: linear-gradient(135deg, var(--nav-prev-color), #1976D2);
            --gradient-nav-next: linear-gradient(135deg, var(--nav-next-color), #7B1FA2);
            --gradient-blackwhite: linear-gradient(135deg, #333, #666, #999);
            --box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            --box-shadow-hover: 0 5px 15px rgba(0, 0, 0, 0.1);
            --transition: all 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Vazir', 'Tanha', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
            color: #333;
            line-height: 1.4;
            min-height: 100vh;
            animation: fadeIn 0.5s ease-out;
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
        }

        header {
            background: var(--gradient-primary);
            color: white;
            padding: 12px 0;
            text-align: center;
            box-shadow: var(--box-shadow);
            margin-bottom: 15px;
            border-radius: 0 0 12px 12px;
        }

        header h1 {
            font-size: 18px;
            font-weight: 700;
        }

        button {
            background: var(--gradient-primary);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            margin: 3px;
            transition: var(--transition);
            box-shadow: var(--box-shadow);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: var(--box-shadow-hover);
        }

        button.selected {
            background: var(--gradient-accent);
            color: var(--dark-color);
        }

        button.correct {
            background: var(--gradient-success);
        }

        button.incorrect {
            background: var(--gradient-danger);
        }

        button.answered {
            background: var(--gradient-answered);
        }

        button.nav-btn {
            padding: 8px 12px;
            font-size: 13px;
            min-width: 100px;
        }

        button.nav-prev-btn {
            background: var(--gradient-nav-prev) !important;
        }

        button.nav-next-btn {
            background: var(--gradient-nav-next) !important;
        }

        button.submit-btn {
            background: var(--gradient-success);
            padding: 10px 16px;
            font-size: 14px;
            min-width: 120px;
        }

        .main-menu {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: auto;
            padding: 10px;
        }

        .exam-info {
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: var(--box-shadow);
            margin-bottom: 15px;
            width: 100%;
            max-width: 800px;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
            border-left: 4px solid var(--primary-color);
        }

        .exam-info h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--accent-color);
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .exam-stats {
            display: flex;
            justify-content: space-around;
            margin: 12px 0;
            flex-wrap: wrap;
            gap: 8px;
        }

        .stat-item {
            text-align: center;
            padding: 10px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 8px;
            min-width: 70px;
            flex: 1;
            max-width: 120px;
        }

        .stat-value {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 4px;
            color: var(--primary-color);
        }

        .stat-label {
            font-size: 11px;
            color: #666;
            font-weight: 600;
        }

        .quiz-container {
            display: none;
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: var(--box-shadow);
            margin-bottom: 15px;
            animation: fadeIn 0.5s ease-out;
            border-left: 4px solid var(--primary-color);
        }

        .lesson-title {
            font-size: 18px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 12px;
            color: var(--primary-color);
            padding-bottom: 8px;
            border-bottom: 2px solid var(--accent-color);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .timer {
            font-size: 16px;
            text-align: center;
            margin-bottom: 12px;
            background: var(--gradient-primary);
            padding: 8px;
            border-radius: 6px;
            font-weight: 700;
            color: white;
            animation: pulse 2s infinite;
        }

        .timer.warning {
            background: var(--gradient-accent);
            animation: pulse 1s infinite;
        }

        .timer.danger {
            background: var(--gradient-danger);
            animation: pulse 0.5s infinite;
        }

        .question {
            font-size: 15px;
            font-weight: 600;
            margin: 12px 0;
            text-align: right;
            line-height: 1.5;
            padding: 12px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 8px;
            border-right: 4px solid var(--primary-color);
            position: relative;
        }

        .options {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 12px;
        }

        .option-btn {
            width: 100%;
            height: 45px;
            text-align: right;
            font-size: 13px;
            padding: 0 50px 0 15px;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            border-radius: 6px;
            margin: 5px 0;
            position: relative;
        }

        .option-btn::before {
            content: attr(data-option);
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            width: 28px;
            height: 28px;
            background: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 13px;
        }

        .option-btn:hover {
            transform: translateX(-5px);
        }

        .navigation {
            display: flex;
            justify-content: center;
            margin: 12px 0;
            flex-wrap: wrap;
            gap: 8px;
        }

        .question-numbers {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 6px;
            margin: 12px 0;
            padding: 12px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 8px;
            direction: rtl;
        }

        .number-btn {
            width: 35px;
            height: 35px;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }

        .number-btn:hover {
            transform: scale(1.1);
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            margin: 12px 0;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 4px;
            width: 0%;
            transition: width 0.3s ease;
        }

        .results-container {
            display: none;
            background: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: var(--box-shadow);
            margin-bottom: 15px;
            animation: fadeIn 0.5s ease-out;
            border-left: 4px solid var(--primary-color);
        }

        .summary {
            font-size: 16px;
            font-weight: 700;
            text-align: center;
            margin: 12px 0;
            padding: 12px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 8px;
        }

        .pass-animation {
            animation: pulse 1.5s infinite;
        }

        .help-container {
            display: none;
            text-align: right;
            line-height: 1.5;
            font-size: 13px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: var(--box-shadow);
            margin-bottom: 15px;
            animation: fadeIn 0.5s ease-out;
            border-left: 4px solid var(--primary-color);
        }

        .help-container h2 {
            color: var(--primary-color);
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--accent-color);
            font-size: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .login-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 70vh;
            padding: 10px;
            animation: fadeIn 0.5s ease-out;
        }

        .login-box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: var(--box-shadow);
            width: 100%;
            max-width: 400px;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
            border-left: 4px solid var(--primary-color);
        }

        .login-box h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .login-box input {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 14px;
            transition: var(--transition);
        }

        .login-box input:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(26, 95, 122, 0.2);
            outline: none;
        }

        .login-message {
            margin-top: 10px;
            font-weight: 600;
            min-height: 20px;
            font-size: 13px;
        }

        .loading {
            color: var(--primary-color);
            margin-top: 10px;
            font-size: 13px;
        }

        .exam-type-selection {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        .exam-type-btn {
            width: 160px;
            height: 65px;
            font-size: 14px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
        }

        .exam-type-btn i {
            font-size: 22px;
            margin-bottom: 5px;
        }

        footer {
            text-align: center;
            padding: 12px 0;
            margin-top: 15px;
            font-size: 11px;
            color: #666;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-top: 2px solid var(--primary-color);
            border-radius: 12px 12px 0 0;
        }

        .answer-status {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 10px;
            background: linear-gradient(135deg, #f8f9fa, #e9ecef);
            border-radius: 8px;
            font-size: 12px;
        }

        .status-item {
            text-align: center;
            flex: 1;
        }

        .status-value {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 3px;
        }

        .status-label {
            font-size: 11px;
            color: #666;
        }

        @media (max-width: 768px) {
            .container {
                padding: 8px;
            }
            header h1 {
                font-size: 16px;
            }
            .exam-type-selection {
                gap: 10px;
            }
            .exam-type-btn {
                width: 140px;
                height: 60px;
                font-size: 13px;
            }
            .question {
                font-size: 14px;
                padding: 10px;
            }
            .option-btn {
                height: 42px;
                font-size: 12px;
                padding: 0 45px 0 12px;
            }
            .option-btn::before {
                width: 25px;
                height: 25px;
                font-size: 12px;
                right: 10px;
            }
            .lesson-title {
                font-size: 16px;
            }
            .timer {
                font-size: 15px;
                padding: 8px;
            }
            .number-btn {
                width: 32px;
                height: 32px;
                font-size: 13px;
            }
            button.nav-btn {
                min-width: 90px;
                font-size: 12px;
                padding: 7px 10px;
            }
            .quiz-container .navigation {
                flex-direction: column-reverse;
                align-items: center;
            }
            .results-container .navigation {
                flex-direction: column-reverse;
                align-items: center;
            }
        }

        @media (max-width: 480px) {
            .stat-item {
                min-width: 65px;
                padding: 8px;
            }
            .stat-value {
                font-size: 18px;
            }
            .stat-label {
                font-size: 10px;
            }
            .question {
                font-size: 13px;
            }
            .option-btn {
                height: 40px;
                font-size: 12px;
                padding: 0 40px 0 10px;
            }
            .option-btn::before {
                width: 22px;
                height: 22px;
                font-size: 11px;
            }
            .exam-type-btn {
                width: 100%;
                max-width: 200px;
                height: 55px;
            }
            .summary {
                font-size: 14px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <header>
        <h1>Ù…Ø±Ú©Ø² Ø¢Ù…ÙˆØ²Ø´ Ø®ÙˆØ§Ø±Ø²Ù…ÛŒ - Ø¢Ø²Ù…ÙˆÙ† Ø¢Ù†Ù„Ø§ÛŒÙ† Ú©Ø§Ø±Ø¨Ø± Ùˆ ØªØ§ÛŒÙ¾ Ø±Ø§ÛŒØ§Ù†Ù‡</h1>
        <p style="font-size: 12px; margin-top: 5px;">Ø¨Ø§ Û±Û¹ Ø³Ø§Ù„ Ø³Ø§Ø¨Ù‚Ù‡ Ø¯Ø±Ø®Ø´Ø§Ù† - Ø¨Ø§Ù„Ø§ØªØ±ÛŒÙ† Ø¯Ø±ØµØ¯ Ù‚Ø¨ÙˆÙ„ÛŒ - Ø¨ÛŒØ´ØªØ±ÛŒÙ† Ù‡Ù†Ø±Ø¬Ùˆ Ø¯Ø± Ù…Ø­Ù…Ø¯ÛŒÙ‡ Ùˆ Ù‚Ø²ÙˆÛŒÙ†</p>
    </header>
    
    <div class="container">
        <!-- ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯ Ø±Ù…Ø² -->
        <div id="login-container" class="login-container">
            <div class="login-box">
                <h2><i class="fas fa-lock"></i> ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ… Ø¢Ø²Ù…ÙˆÙ†</h2>
                <p style="margin-bottom: 15px; color: #666; font-size: 13px;">Ù„Ø·ÙØ§Ù‹ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ø¢Ø²Ù…ÙˆÙ† ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:</p>
                <input type="password" id="password-input" placeholder="Ø±Ù…Ø² Ø¹Ø¨ÙˆØ±" autocomplete="off">
                <button id="login-btn" onclick="checkPassword()"><i class="fas fa-sign-in-alt"></i> ÙˆØ±ÙˆØ¯ Ø¨Ù‡ Ø³ÛŒØ³ØªÙ…</button>
                <p id="login-message" class="login-message"></p>
                <p id="loading-message" class="loading" style="display: none;">
                    <i class="fas fa-spinner fa-spin"></i> Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÙˆØ§Ù„Ø§Øª...
                </p>
            </div>
        </div>

        <!-- Ù…Ù†ÙˆÛŒ Ø§ØµÙ„ÛŒ -->
        <div id="main-menu" class="main-menu" style="display: none;">
            <div class="exam-info">
                <h2><i class="fas fa-info-circle"></i> Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†</h2>
                <p style="font-size: 14px; margin-bottom: 15px;">Ù„Ø·ÙØ§Ù‹ Ù†ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ† Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø± Ø®ÙˆØ¯ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯:</p>
                
                <div class="exam-type-selection">
                    <button class="exam-type-btn" id="user-exam-btn" onclick="selectExamType('user')">
                        <i class="fas fa-desktop"></i> Ø¢Ø²Ù…ÙˆÙ† Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ÛŒØ§Ù†Ù‡
                    </button>
                    <button class="exam-type-btn" id="typing-exam-btn" onclick="selectExamType('typing')">
                        <i class="fas fa-keyboard"></i> Ø¢Ø²Ù…ÙˆÙ† ØªØ§ÛŒÙ¾ Ø±Ø§ÛŒØ§Ù†Ù‡
                    </button>
                    <button class="exam-type-btn" id="blackwhite-exam-btn" onclick="selectExamType('blackwhite')">
                        <i class="fas fa-adjust"></i> Ø¢Ø²Ù…ÙˆÙ† Ø³ÛŒØ§Ù‡ Ùˆ Ø³ÙÛŒØ¯
                    </button>
                </div>
                
                <!-- Ù†Ù…Ø§ÛŒØ´ ÙˆØ¶Ø¹ÛŒØª Ø³ÙˆØ§Ù„Ø§Øª -->
                <div id="status-text" style="margin-top: 15px; padding: 10px; background: #f8f9fa; border-radius: 6px; font-size: 13px;">
                    <i class="fas fa-spinner fa-spin"></i> Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø³ÙˆØ§Ù„Ø§Øª...
                </div>
            </div>
            
            <div style="margin-top: 20px; display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;">
                <button id="logout-btn" onclick="logout()" style="background: var(--gradient-danger);">
                    <i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬
                </button>
            </div>
        </div>

        <!-- ØµÙØ­Ù‡ Ø¢Ø²Ù…ÙˆÙ† -->
        <div id="quiz-container" class="quiz-container">
            <div class="lesson-title" id="lesson-title">Ø¢Ø²Ù…ÙˆÙ†</div>
            <div class="timer" id="timer">â±ï¸ Ø²Ù…Ø§Ù†: 30:00</div>
            
            <div class="progress-container">
                <div class="progress-bar" id="progress-bar"></div>
            </div>
            
            <div class="question" id="question"></div>
            
            <div class="options" id="options">
                <button class="option-btn" id="option-0" onclick="selectOption(0)" data-option="Ø§Ù„Ù"></button>
                <button class="option-btn" id="option-1" onclick="selectOption(1)" data-option="Ø¨"></button>
                <button class="option-btn" id="option-2" onclick="selectOption(2)" data-option="Ø¬"></button>
                <button class="option-btn" id="option-3" onclick="selectOption(3)" data-option="Ø¯"></button>
            </div>
            
            <!-- ØªØ±ØªÛŒØ¨ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§: Ù¾Ø§ÛŒØ§Ù† Ø¢Ø²Ù…ÙˆÙ† - Ù‚Ø¨Ù„ÛŒ - Ø¨Ø¹Ø¯ÛŒ -->
            <div class="navigation">
                <button class="submit-btn" id="submit-btn" onclick="submitQuiz()"><i class="fas fa-check-circle"></i> Ù¾Ø§ÛŒØ§Ù† Ø¢Ø²Ù…ÙˆÙ†</button>
                <button class="nav-btn nav-prev-btn" id="prev-btn" onclick="prevQuestion()">Ù‚Ø¨Ù„ÛŒ <i class="fas fa-arrow-left"></i></button>
                <button class="nav-btn nav-next-btn" id="next-btn" onclick="nextQuestion()"><i class="fas fa-arrow-right"></i> Ø¨Ø¹Ø¯ÛŒ</button>
            </div>
            
            <!-- Ø´Ù…Ø§Ø±Ù‡ Ø³ÙˆØ§Ù„Ø§Øª ÙˆØ³Ø·â€ŒÚ†ÛŒÙ† -->
            <div class="question-numbers" id="question-numbers"></div>
        </div>

        <!-- ØµÙØ­Ù‡ Ù†ØªØ§ÛŒØ¬ -->
        <div id="results-container" class="results-container">
            <div class="lesson-title" id="result-lesson-title">ğŸ“Š Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ†</div>
            <div class="summary" id="summary"></div>
            
            <!-- Ù†ÙˆØ§Ø± ÙˆØ¶Ø¹ÛŒØª Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ -->
            <div class="answer-status" id="answer-status">
                <div class="status-item">
                    <div class="status-value" id="correct-count">0</div>
                    <div class="status-label">Ø³ÙˆØ§Ù„Ø§Øª Ø¯Ø±Ø³Øª</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="incorrect-count">0</div>
                    <div class="status-label">Ø³ÙˆØ§Ù„Ø§Øª ØºÙ„Ø·</div>
                </div>
                <div class="status-item">
                    <div class="status-value" id="unanswered-count">0</div>
                    <div class="status-label">Ø³ÙˆØ§Ù„Ø§Øª Ø¨ÛŒâ€ŒÙ¾Ø§Ø³Ø®</div>
                </div>
            </div>
            
            <div class="question" id="result-question">Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø³ÙˆØ§Ù„Ø§Øª Ùˆ Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯...</div>
            
            <div class="options" id="result-options">
                <button class="option-btn" id="result-option-0" disabled data-option="Ø§Ù„Ù"></button>
                <button class="option-btn" id="result-option-1" disabled data-option="Ø¨"></button>
                <button class="option-btn" id="result-option-2" disabled data-option="Ø¬"></button>
                <button class="option-btn" id="result-option-3" disabled data-option="Ø¯"></button>
            </div>
            
            <!-- ØªØ±ØªÛŒØ¨ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§: Ù…Ù†Ùˆ - Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯ - Ø¨Ø¹Ø¯ÛŒ - Ù‚Ø¨Ù„ÛŒ -->
            <div class="navigation">
                <button class="nav-btn" id="back-to-menu-btn" onclick="backToMainMenu()"><i class="fas fa-home"></i> Ù…Ù†Ùˆ</button>
                <button class="nav-btn" id="new-exam-btn" onclick="startSameExamAgain()" style="background: var(--gradient-primary);">
                    <i class="fas fa-redo"></i> Ø¢Ø²Ù…ÙˆÙ† Ø¬Ø¯ÛŒØ¯
                </button>
                <button class="nav-btn nav-next-btn" id="next-result-btn" onclick="nextResultQuestion()"><i class="fas fa-arrow-right"></i> Ø¨Ø¹Ø¯ÛŒ</button>
                <button class="nav-btn nav-prev-btn" id="prev-result-btn" onclick="prevResultQuestion()">Ù‚Ø¨Ù„ÛŒ <i class="fas fa-arrow-left"></i></button>
            </div>
            
            <!-- Ø´Ù…Ø§Ø±Ù‡ Ø³ÙˆØ§Ù„Ø§Øª -->
            <div class="question-numbers" id="result-numbers"></div>
        </div>
    </div>

    <footer>
        <h3>Â© 2025 Ø¢Ø²Ù…ÙˆÙ† Ú©Ø§Ø±Ø¨Ø± Ùˆ ØªØ§ÛŒÙ¾ Ø±Ø§ÛŒØ§Ù†Ù‡ - Ù…ÙˆØ³Ø³Ù‡ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ø®ÙˆØ§Ø±Ø²Ù…ÛŒ | 09387405653 - 02832562070</h3>
        <a href="https://www.aparat.com" style="color: inherit; text-decoration: none;">
            <h3>SAY4s</h3>
        </a>
    </footer>

    <script>
        // Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø¬Ù‡Ø§Ù†ÛŒ
        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let timerInterval = null;
        let currentExamType = "";
        let correctPassword = "2070";
        let userAnswers = [];
        
        // Ø¢Ø±Ø§ÛŒÙ‡â€ŒÙ‡Ø§ÛŒ Ø³ÙˆØ§Ù„Ø§Øª
        let userQuestions = [];
        let typingQuestions = [];
        let blackwhiteQuestions = [];
        let questionsLoaded = false;
        let loadingAttempted = false;

        // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ù‡Ù†Ú¯Ø§Ù… Ù„ÙˆØ¯ ØµÙØ­Ù‡
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸš€ Ø³ÛŒØ³ØªÙ… Ø¢Ø²Ù…ÙˆÙ† Ø¯Ø± Ø­Ø§Ù„ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ...');
            document.getElementById('password-input').focus();
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒØ¯Ø§Ø¯ Enter Ø¨Ø±Ø§ÛŒ ÙÛŒÙ„Ø¯ Ø±Ù…Ø²
            document.getElementById('password-input').addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    checkPassword();
                }
            });
        });

        // ØªØ§Ø¨Ø¹ Ø¨Ø±Ø±Ø³ÛŒ Ø±Ù…Ø²
        function checkPassword() {
            const inputPassword = document.getElementById('password-input').value;
            const messageElement = document.getElementById('login-message');
            
            if (inputPassword === correctPassword) {
                messageElement.textContent = 'âœ… ÙˆØ±ÙˆØ¯ Ù…ÙˆÙÙ‚! Ø¯Ø± Ø­Ø§Ù„ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÙˆØ§Ù„Ø§Øª...';
                messageElement.style.color = 'var(--success-color)';
                
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÙˆØ§Ù„Ø§Øª
                loadQuestionsAutomatically().then((success) => {
                    if (success) {
                        setTimeout(() => {
                            document.getElementById('login-container').style.display = 'none';
                            document.getElementById('main-menu').style.display = 'flex';
                            messageElement.textContent = '';
                            updateQuestionsStatus();
                        }, 500);
                    } else {
                        messageElement.textContent = 'âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÙˆØ§Ù„Ø§Øª!';
                        messageElement.style.color = 'var(--danger-color)';
                    }
                }).catch(error => {
                    messageElement.textContent = 'âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø³ÙˆØ§Ù„Ø§Øª: ' + error.message;
                    messageElement.style.color = 'var(--danger-color)';
                });
            } else {
                messageElement.textContent = 'âŒ Ø±Ù…Ø² Ø¹Ø¨ÙˆØ± Ø§Ø´ØªØ¨Ø§Ù‡ Ø§Ø³Øª';
                messageElement.style.color = 'var(--danger-color)';
                
                const loginBox = document.querySelector('.login-box');
                loginBox.style.animation = 'shake 0.5s';
                setTimeout(() => loginBox.style.animation = '', 500);
            }
        }

        // ØªØ§Ø¨Ø¹ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø³ÙˆØ§Ù„Ø§Øª
        async function loadQuestionsAutomatically() {
            if (loadingAttempted) {
                return questionsLoaded;
            }
            
            loadingAttempted = true;
            
            try {
                console.log('ğŸ” Ø¯Ø± Ø­Ø§Ù„ Ø¬Ø³ØªØ¬ÙˆÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø³ÙˆØ§Ù„Ø§Øª...');
                
                // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù‡Ù…Ø²Ù…Ø§Ù† Ø§Ø² ÙØ§ÛŒÙ„â€ŒÙ‡Ø§
                const [userData, typingData, blackwhiteData] = await Promise.allSettled([
                    loadTextFile('karbarquiz.txt'),
                    loadTextFile('typequiz.txt'),
                    loadTextFile('blackwhite.txt')
                ]);
                
                console.log('ğŸ“Š Ù†ØªØ§ÛŒØ¬ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙØ§ÛŒÙ„â€ŒÙ‡Ø§:');
                console.log('- Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ÛŒØ§Ù†Ù‡:', userData.status);
                console.log('- ØªØ§ÛŒÙ¾ Ø±Ø§ÛŒØ§Ù†Ù‡:', typingData.status);
                console.log('- Ø³ÛŒØ§Ù‡ Ùˆ Ø³ÙÛŒØ¯:', blackwhiteData.status);
                
                // Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ÛŒØ§Ù†Ù‡
                if (userData.status === 'fulfilled' && userData.value) {
                    await parseTxtQuestions(userData.value, 'user');
                } else {
                    console.warn('âš ï¸ ÙØ§ÛŒÙ„ karbarquiz.txt Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ ÛŒØ§ Ø®Ø·Ø§ Ø¯Ø± Ø®ÙˆØ§Ù†Ø¯Ù†');
                }
                
                // Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙØ§ÛŒÙ„ ØªØ§ÛŒÙ¾ Ø±Ø§ÛŒØ§Ù†Ù‡
                if (typingData.status === 'fulfilled' && typingData.value) {
                    await parseTxtQuestions(typingData.value, 'typing');
                } else {
                    console.warn('âš ï¸ ÙØ§ÛŒÙ„ typequiz.txt Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ ÛŒØ§ Ø®Ø·Ø§ Ø¯Ø± Ø®ÙˆØ§Ù†Ø¯Ù†');
                }
                
                // Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙØ§ÛŒÙ„ Ø³ÛŒØ§Ù‡ Ùˆ Ø³ÙÛŒØ¯
                if (blackwhiteData.status === 'fulfilled' && blackwhiteData.value) {
                    await parseTxtQuestions(blackwhiteData.value, 'blackwhite');
                } else {
                    console.warn('âš ï¸ ÙØ§ÛŒÙ„ blackwhite.txt Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯ ÛŒØ§ Ø®Ø·Ø§ Ø¯Ø± Ø®ÙˆØ§Ù†Ø¯Ù†');
                }
                
                // Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Ø³ÙˆØ§Ù„
                if (userQuestions.length === 0 && typingQuestions.length === 0 && blackwhiteQuestions.length === 0) {
                    throw new Error('Ù‡ÛŒÚ† Ø³ÙˆØ§Ù„ Ù…Ø¹ØªØ¨Ø±ÛŒ Ø¯Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ TXT Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯');
                }
                
                questionsLoaded = true;
                console.log(`âœ… Ø³ÙˆØ§Ù„Ø§Øª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯: ${userQuestions.length} Ø³ÙˆØ§Ù„ Ú©Ø§Ø±Ø¨Ø±ØŒ ${typingQuestions.length} Ø³ÙˆØ§Ù„ ØªØ§ÛŒÙ¾ØŒ ${blackwhiteQuestions.length} Ø³ÙˆØ§Ù„ Ø³ÛŒØ§Ù‡ Ùˆ Ø³ÙÛŒØ¯`);
                return true;
            } catch (error) {
                console.error('âŒ Ø®Ø·Ø§ Ø¯Ø± Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± Ø³ÙˆØ§Ù„Ø§Øª:', error);
                throw error;
            }
        }

        // ØªØ§Ø¨Ø¹ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ ÙØ§ÛŒÙ„ Ù…ØªÙ†ÛŒ
        async function loadTextFile(filename) {
            try {
                console.log(`ğŸ“„ Ø¯Ø± Ø­Ø§Ù„ Ø®ÙˆØ§Ù†Ø¯Ù† ÙØ§ÛŒÙ„ ${filename}...`);
                const response = await fetch(filename, { cache: 'no-cache' });
                
                if (!response.ok) {
                    throw new Error(`Ø®Ø·Ø§ÛŒ HTTP ${response.status} Ø¨Ø±Ø§ÛŒ ÙØ§ÛŒÙ„ ${filename}`);
                }
                
                const text = await response.text();
                
                if (!text || text.trim().length === 0) {
                    throw new Error(`ÙØ§ÛŒÙ„ ${filename} Ø®Ø§Ù„ÛŒ Ø§Ø³Øª`);
                }
                
                console.log(`âœ“ ÙØ§ÛŒÙ„ ${filename} Ø®ÙˆØ§Ù†Ø¯Ù‡ Ø´Ø¯ØŒ Ø­Ø¬Ù…: ${text.length} Ú©Ø§Ø±Ø§Ú©ØªØ±`);
                return text;
            } catch (error) {
                console.warn(`âŒ Ø®Ø·Ø§ Ø¯Ø± Ø®ÙˆØ§Ù†Ø¯Ù† ÙØ§ÛŒÙ„ ${filename}:`, error.message);
                return null;
            }
        }

        // ØªØ§Ø¨Ø¹ ØªØ¬Ø²ÛŒÙ‡ Ø³ÙˆØ§Ù„Ø§Øª Ø§Ø² ÙØ§ÛŒÙ„ TXT
        async function parseTxtQuestions(text, fileType) {
            console.log(`ğŸ“ Ù¾Ø±Ø¯Ø§Ø²Ø´ ÙØ§ÛŒÙ„ ${fileType}...`);
            
            const lines = text.split('\n');
            let currentQuestion = null;
            let lineCount = 0;
            let questionCount = 0;
            
            for (let i = 0; i < lines.length; i++) {
                let line = lines[i].trim();
                
                // Ø­Ø°Ù Ú©Ø§Ø±Ø§Ú©ØªØ±Ù‡Ø§ÛŒ \r
                line = line.replace(/\r/g, '');
                
                if (line === '' || line === ' ' || line === '\t') {
                    // Ø®Ø· Ø®Ø§Ù„ÛŒ - Ø°Ø®ÛŒØ±Ù‡ Ø³ÙˆØ§Ù„ Ù‚Ø¨Ù„ÛŒ
                    if (currentQuestion && currentQuestion.question && currentQuestion.question.trim() !== '') {
                        if (validateQuestion(currentQuestion)) {
                            // Ø§ÙØ²ÙˆØ¯Ù† Ø¨Ù‡ Ø¢Ø±Ø§ÛŒÙ‡ Ù…Ù†Ø§Ø³Ø¨
                            switch(fileType) {
                                case 'user':
                                    userQuestions.push(currentQuestion);
                                    break;
                                case 'typing':
                                    typingQuestions.push(currentQuestion);
                                    break;
                                case 'blackwhite':
                                    blackwhiteQuestions.push(currentQuestion);
                                    break;
                            }
                            questionCount++;
                        }
                    }
                    currentQuestion = null;
                    lineCount = 0;
                    continue;
                }
                
                if (!currentQuestion) {
                    currentQuestion = {
                        question: '',
                        options: ['', '', '', ''],
                        answer: '',
                        category: 'Ø¹Ù…ÙˆÙ…ÛŒ',
                        type: fileType
                    };
                }
                
                switch (lineCount) {
                    case 0: // Ù…ØªÙ† Ø³ÙˆØ§Ù„
                        currentQuestion.question = line;
                        break;
                    case 1: // Ú¯Ø²ÛŒÙ†Ù‡ Ø§Ù„Ù
                        currentQuestion.options[0] = line;
                        break;
                    case 2: // Ú¯Ø²ÛŒÙ†Ù‡ Ø¨
                        currentQuestion.options[1] = line;
                        break;
                    case 3: // Ú¯Ø²ÛŒÙ†Ù‡ Ø¬
                        currentQuestion.options[2] = line;
                        break;
                    case 4: // Ú¯Ø²ÛŒÙ†Ù‡ Ø¯
                        currentQuestion.options[3] = line;
                        break;
                    case 5: // Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­
                        line = line.replace(/[\.\s]/g, '').trim();
                        if (['Ø§Ù„Ù', 'Ø¨', 'Ø¬', 'Ø¯', 'a', 'b', 'c', 'd', 'A', 'B', 'C', 'D'].includes(line)) {
                            const answerMap = {
                                'a': 'Ø§Ù„Ù', 'A': 'Ø§Ù„Ù',
                                'b': 'Ø¨', 'B': 'Ø¨',
                                'c': 'Ø¬', 'C': 'Ø¬',
                                'd': 'Ø¯', 'D': 'Ø¯'
                            };
                            currentQuestion.answer = answerMap[line] || line;
                        } else {
                            console.warn(`âš ï¸ Ù¾Ø§Ø³Ø® Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø¯Ø± ÙØ§ÛŒÙ„ ${fileType}: "${line}"`);
                            currentQuestion.answer = 'Ø§Ù„Ù';
                        }
                        break;
                    case 6: // Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
                        currentQuestion.category = line;
                        break;
                }
                
                lineCount++;
                
                // Ø§Ú¯Ø± Ø¢Ø®Ø±ÛŒÙ† Ø®Ø· ÙØ§ÛŒÙ„ Ø¨Ø§Ø´Ø¯
                if (i === lines.length - 1 && currentQuestion && currentQuestion.question && currentQuestion.question.trim() !== '') {
                    if (validateQuestion(currentQuestion)) {
                        switch(fileType) {
                            case 'user':
                                userQuestions.push(currentQuestion);
                                break;
                            case 'typing':
                                typingQuestions.push(currentQuestion);
                                break;
                            case 'blackwhite':
                                blackwhiteQuestions.push(currentQuestion);
                                break;
                        }
                        questionCount++;
                    }
                }
            }
            
            console.log(`âœ“ ÙØ§ÛŒÙ„ ${fileType}: ${questionCount} Ø³ÙˆØ§Ù„ Ù…Ø¹ØªØ¨Ø± Ù¾ÛŒØ¯Ø§ Ø´Ø¯`);
        }

        // ØªØ§Ø¨Ø¹ Ø§Ø¹ØªØ¨Ø§Ø±Ø³Ù†Ø¬ÛŒ Ø³ÙˆØ§Ù„
        function validateQuestion(question) {
            if (!question.question || question.question.trim() === '') {
                return false;
            }
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§
            for (let i = 0; i < 4; i++) {
                if (!question.options[i] || question.options[i].trim() === '') {
                    return false;
                }
            }
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ù¾Ø§Ø³Ø®
            if (!question.answer || !['Ø§Ù„Ù', 'Ø¨', 'Ø¬', 'Ø¯'].includes(question.answer)) {
                return false;
            }
            
            return true;
        }

        // ØªØ§Ø¨Ø¹ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ø³ÙˆØ§Ù„Ø§Øª
        function updateQuestionsStatus() {
            const statusElement = document.getElementById('status-text');
            if (!statusElement) return;
            
            if (!questionsLoaded) {
                statusElement.innerHTML = '<i class="fas fa-exclamation-triangle" style="color: var(--danger-color);"></i> Ø³ÙˆØ§Ù„Ø§Øª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ø´Ø¯! ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.';
            } else {
                const userCount = userQuestions.length;
                const typingCount = typingQuestions.length;
                const blackwhiteCount = blackwhiteQuestions.length;
                
                if (userCount === 0 && typingCount === 0 && blackwhiteCount === 0) {
                    statusElement.innerHTML = '<i class="fas fa-exclamation-triangle" style="color: var(--danger-color);"></i> Ù‡ÛŒÚ† Ø³ÙˆØ§Ù„ÛŒ ÛŒØ§ÙØª Ù†Ø´Ø¯! ÙØ±Ù…Øª ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ø±Ø±Ø³ÛŒ Ú©Ù†ÛŒØ¯.';
                } else {
                    let statusHTML = `<i class="fas fa-check-circle" style="color: var(--success-color);"></i> `;
                    let parts = [];
                    
                    if (userCount > 0) {
                        parts.push(`<span style="color: var(--primary-color);">${userCount} Ø³ÙˆØ§Ù„ Ú©Ø§Ø±Ø¨Ø±</span>`);
                    }
                    if (typingCount > 0) {
                        parts.push(`<span style="color: var(--secondary-color);">${typingCount} Ø³ÙˆØ§Ù„ ØªØ§ÛŒÙ¾</span>`);
                    }
                    if (blackwhiteCount > 0) {
                        parts.push(`<span style="color: var(--blackwhite-color);">${blackwhiteCount} Ø³ÙˆØ§Ù„ Ø³ÛŒØ§Ù‡â€ŒÙˆØ³ÙÛŒØ¯</span>`);
                    }
                    
                    statusHTML += parts.join(' | ');
                    statusElement.innerHTML = statusHTML;
                }
            }
        }

        // ØªØ§Ø¨Ø¹ Ø§Ù†ØªØ®Ø§Ø¨ Ù†ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ†
        function selectExamType(type) {
            if (!questionsLoaded) {
                alert('âŒ Ø³ÙˆØ§Ù„Ø§Øª Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù†Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯!\n\nÙ„Ø·ÙØ§Ù‹:\n1. ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ø±Ø§ Ø¯Ø± Ú©Ù†Ø§Ø± ÙØ§ÛŒÙ„ HTML Ù‚Ø±Ø§Ø± Ø¯Ù‡ÛŒØ¯\n2. ØµÙØ­Ù‡ Ø±Ø§ Ø±ÙØ±Ø´ Ú©Ù†ÛŒØ¯\n3. Ø¯ÙˆØ¨Ø§Ø±Ù‡ ÙˆØ§Ø±Ø¯ Ø´ÙˆÛŒØ¯');
                return;
            }
            
            let allQuestions;
            let examName;
            
            switch(type) {
                case 'user':
                    allQuestions = userQuestions;
                    examName = 'Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ÛŒØ§Ù†Ù‡';
                    break;
                case 'typing':
                    allQuestions = typingQuestions;
                    examName = 'ØªØ§ÛŒÙ¾ Ø±Ø§ÛŒØ§Ù†Ù‡';
                    break;
                case 'blackwhite':
                    allQuestions = blackwhiteQuestions;
                    examName = 'Ø³ÛŒØ§Ù‡ Ùˆ Ø³ÙÛŒØ¯';
                    break;
                default:
                    alert('âŒ Ù†ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ† Ù†Ø§Ù…Ø¹ØªØ¨Ø±');
                    return;
            }
            
            if (allQuestions.length === 0) {
                alert(`âŒ Ù‡ÛŒÚ† Ø³ÙˆØ§Ù„ÛŒ Ø¨Ø±Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ† ${examName} ÛŒØ§ÙØª Ù†Ø´Ø¯.`);
                return;
            }
            
            if (allQuestions.length < 10) {
                if (!confirm(`âš ï¸ ÙÙ‚Ø· ${allQuestions.length} Ø³ÙˆØ§Ù„ Ø¨Ø±Ø§ÛŒ Ø¢Ø²Ù…ÙˆÙ† ${examName} ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ø¯. Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø§Ø¯Ø§Ù…Ù‡ Ø¯Ù‡ÛŒØ¯ØŸ`)) {
                    return;
                }
            }
            
            currentExamType = type;
            startRandomExam(type);
        }

        // ØªØ§Ø¨Ø¹ Ø®Ø±ÙˆØ¬
        function logout() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            currentQuestions = [];
            currentQuestionIndex = 0;
            userAnswers = [];
            
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('results-container').style.display = 'none';
            document.getElementById('login-container').style.display = 'flex';
            document.getElementById('password-input').value = '';
            document.getElementById('login-message').textContent = '';
        }

        // ØªØ§Ø¨Ø¹ Ø´Ø±ÙˆØ¹ Ø¢Ø²Ù…ÙˆÙ† ØªØµØ§Ø¯ÙÛŒ
        function startRandomExam(type) {
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            
            let title = '';
            switch(type) {
                case 'user':
                    title = "ğŸ¯ Ø¢Ø²Ù…ÙˆÙ† Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ÛŒØ§Ù†Ù‡";
                    break;
                case 'typing':
                    title = "âŒ¨ï¸ Ø¢Ø²Ù…ÙˆÙ† ØªØ§ÛŒÙ¾ Ø±Ø§ÛŒØ§Ù†Ù‡";
                    break;
                case 'blackwhite':
                    title = "âš«âšª Ø¢Ø²Ù…ÙˆÙ† Ø³ÛŒØ§Ù‡ Ùˆ Ø³ÙÛŒØ¯";
                    break;
            }
            
            document.getElementById('lesson-title').textContent = title;
            
            let allQuestions;
            switch(type) {
                case 'user':
                    allQuestions = userQuestions;
                    break;
                case 'typing':
                    allQuestions = typingQuestions;
                    break;
                case 'blackwhite':
                    allQuestions = blackwhiteQuestions;
                    break;
            }
            
            // Ø§Ù†ØªØ®Ø§Ø¨ Ø³ÙˆØ§Ù„Ø§Øª ØªØµØ§Ø¯ÙÛŒ
            const questionCount = Math.min(20, allQuestions.length);
            currentQuestions = getRandomQuestions(allQuestions, questionCount);
            userAnswers = new Array(currentQuestions.length).fill(null);
            
            currentQuestionIndex = 0;
            createQuestionNumberButtons();
            startTimer();
            showQuestion();
            updateNavButtons();
        }

        // ØªØ§Ø¨Ø¹ Ø§Ù†ØªØ®Ø§Ø¨ ØªØµØ§Ø¯ÙÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ùˆ Ù…Ø®Ù„ÙˆØ· Ú©Ø±Ø¯Ù† Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§
        function getRandomQuestions(allQuestions, count) {
            // Ú©Ù¾ÛŒ Ú©Ø±Ø¯Ù† Ùˆ Ù…Ø®Ù„ÙˆØ· Ú©Ø±Ø¯Ù† Ø¢Ø±Ø§ÛŒÙ‡
            const shuffledQuestions = [...allQuestions];
            for (let i = shuffledQuestions.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffledQuestions[i], shuffledQuestions[j]] = [shuffledQuestions[j], shuffledQuestions[i]];
            }
            
            // Ø§Ù†ØªØ®Ø§Ø¨ ØªØ¹Ø¯Ø§Ø¯ Ù…ÙˆØ±Ø¯ Ù†Ø¸Ø±
            const selected = shuffledQuestions.slice(0, count);
            
            // Ù…Ø®Ù„ÙˆØ· Ú©Ø±Ø¯Ù† Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù‡Ø± Ø³ÙˆØ§Ù„
            selected.forEach(question => {
                // Ø°Ø®ÛŒØ±Ù‡ Ù¾Ø§Ø³Ø® Ø§ØµÙ„ÛŒ (Ù…Ø«Ù„ "Ø¬")
                const originalCorrectAnswer = question.answer;
                const originalOptions = [...question.options];
                
                // ØªØ¨Ø¯ÛŒÙ„ Ù¾Ø§Ø³Ø® Ø¨Ù‡ Ø´Ø§Ø®Øµ Ø¹Ø¯Ø¯ÛŒ (Ø§Ù„Ù=0ØŒ Ø¨=1ØŒ Ø¬=2ØŒ Ø¯=3)
                const originalAnswerIndex = ['Ø§Ù„Ù', 'Ø¨', 'Ø¬', 'Ø¯'].indexOf(originalCorrectAnswer);
                
                // Ø§ÛŒØ¬Ø§Ø¯ Ù†Ù‚Ø´Ù‡ Ù…Ø®Ù„ÙˆØ· Ú©Ø±Ø¯Ù†
                const indices = [0, 1, 2, 3];
                for (let i = indices.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [indices[i], indices[j]] = [indices[j], indices[i]];
                }
                
                // Ù…Ø®Ù„ÙˆØ· Ú©Ø±Ø¯Ù† Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù†Ù‚Ø´Ù‡
                const shuffledOptions = [
                    originalOptions[indices[0]],
                    originalOptions[indices[1]],
                    originalOptions[indices[2]],
                    originalOptions[indices[3]]
                ];
                
                // Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø´Ø§Ø®Øµ Ø¬Ø¯ÛŒØ¯ Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­ Ø¯Ø± Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®Ù„ÙˆØ· Ø´Ø¯Ù‡
                let newCorrectIndex = -1;
                for (let i = 0; i < indices.length; i++) {
                    if (indices[i] === originalAnswerIndex) {
                        newCorrectIndex = i;
                        break;
                    }
                }
                
                // Ø§Ú¯Ø± Ù†ØªÙˆØ§Ù†Ø³ØªÛŒÙ… Ù¾ÛŒØ¯Ø§ Ú©Ù†ÛŒÙ…ØŒ Ø§Ø² Ø§ØµÙ„ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ…
                if (newCorrectIndex === -1) {
                    console.warn('âš ï¸ Ø®Ø·Ø§ Ø¯Ø± Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø´Ø§Ø®Øµ Ù¾Ø§Ø³Ø® Ù…Ø®Ù„ÙˆØ· Ø´Ø¯Ù‡ØŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø§ØµÙ„ÛŒ');
                    newCorrectIndex = originalAnswerIndex;
                }
                
                // Ø°Ø®ÛŒØ±Ù‡ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ù…Ø®Ù„ÙˆØ· Ú©Ø±Ø¯Ù†
                question.originalOptions = originalOptions;
                question.shuffledOptions = shuffledOptions;
                question.correctIndex = newCorrectIndex;
                question.originalCorrectIndex = originalAnswerIndex;
                question.shuffleMap = indices;
                question.correctAnswer = originalCorrectAnswer;
                question.originalAnswerIndex = originalAnswerIndex;
                
                // Ù„Ø§Ú¯ Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯
                console.log(`Ø³ÙˆØ§Ù„: ${question.question.substring(0, 50)}...`);
                console.log(`- Ù¾Ø§Ø³Ø® Ø§ØµÙ„ÛŒ: ${originalCorrectAnswer} (Ø´Ø§Ø®Øµ: ${originalAnswerIndex})`);
                console.log(`- Ù†Ù‚Ø´Ù‡ Ù…Ø®Ù„ÙˆØ· Ú©Ø±Ø¯Ù†: ${indices}`);
                console.log(`- Ù¾Ø§Ø³Ø® Ù…Ø®Ù„ÙˆØ· Ø´Ø¯Ù‡ Ø´Ø§Ø®Øµ: ${newCorrectIndex}`);
                console.log(`- Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ:`, originalOptions);
                console.log(`- Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®Ù„ÙˆØ· Ø´Ø¯Ù‡:`, shuffledOptions);
            });
            
            return selected;
        }

        // ØªØ§Ø¨Ø¹ Ø´Ø±ÙˆØ¹ ØªØ§ÛŒÙ…Ø±
        function startTimer() {
            let timeLeft = 30 * 60;
            
            if (timerInterval) {
                clearInterval(timerInterval);
            }
            
            updateTimerDisplay(timeLeft);
            
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay(timeLeft);
                
                const timerElement = document.getElementById('timer');
                if (timeLeft <= 300) {
                    timerElement.className = 'timer warning';
                }
                if (timeLeft <= 60) {
                    timerElement.className = 'timer danger';
                }
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerInterval = null;
                    submitQuiz();
                }
            }, 1000);
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ ØªØ§ÛŒÙ…Ø±
        function updateTimerDisplay(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            const timerElement = document.getElementById('timer');
            timerElement.textContent = `â±ï¸ Ø²Ù…Ø§Ù†: ${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ø³ÙˆØ§Ù„
        function showQuestion() {
            if (currentQuestions.length === 0 || currentQuestionIndex >= currentQuestions.length) {
                return;
            }
            
            const question = currentQuestions[currentQuestionIndex];
            document.getElementById('question').textContent = `Ø³ÙˆØ§Ù„ ${currentQuestionIndex + 1}: ${question.question}`;
            
            // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®Ù„ÙˆØ· Ø´Ø¯Ù‡
            const displayOptions = question.shuffledOptions || question.options;
            
            for (let i = 0; i < 4; i++) {
                const btn = document.getElementById(`option-${i}`);
                if (displayOptions[i]) {
                    btn.textContent = displayOptions[i];
                    btn.style.display = 'flex';
                    
                    // ØªÙ†Ø¸ÛŒÙ… ÙˆØ¶Ø¹ÛŒØª Ø¯Ú©Ù…Ù‡
                    if (userAnswers[currentQuestionIndex] === i) {
                        btn.className = 'option-btn selected';
                    } else {
                        btn.className = 'option-btn';
                    }
                } else {
                    btn.style.display = 'none';
                }
            }
            
            updateProgress();
            updateQuestionNumberButtons();
            updateNavButtons();
        }

        // ØªØ§Ø¨Ø¹ Ø§Ù†ØªØ®Ø§Ø¨ Ú¯Ø²ÛŒÙ†Ù‡
        function selectOption(index) {
            if (currentQuestionIndex >= currentQuestions.length) return;
            userAnswers[currentQuestionIndex] = index;
            showQuestion();
        }

        // ØªØ§Ø¨Ø¹ Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ø³ÙˆØ§Ù„Ø§Øª
        function createQuestionNumberButtons() {
            const container = document.getElementById('question-numbers');
            container.innerHTML = '';
            
            for (let i = 0; i < currentQuestions.length; i++) {
                const button = document.createElement('button');
                button.textContent = i + 1;
                button.className = 'number-btn';
                button.onclick = () => {
                    currentQuestionIndex = i;
                    showQuestion();
                };
                container.appendChild(button);
            }
            
            updateQuestionNumberButtons();
        }

        // ØªØ§Ø¨Ø¹ Ø¢Ù¾Ø¯ÛŒØª Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§Ø±Ù‡
        function updateQuestionNumberButtons() {
            const buttons = document.querySelectorAll('#question-numbers .number-btn');
            buttons.forEach((btn, index) => {
                btn.classList.remove('selected', 'answered');
                
                if (index === currentQuestionIndex) {
                    btn.classList.add('selected');
                } else if (userAnswers[index] !== null) {
                    btn.classList.add('answered');
                }
            });
        }

        // ØªØ§Ø¨Ø¹ Ø¢Ù¾Ø¯ÛŒØª Ù†ÙˆØ§Ø± Ù¾ÛŒØ´Ø±ÙØª
        function updateProgress() {
            const progress = ((currentQuestionIndex + 1) / currentQuestions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
        }

        // ØªØ§Ø¨Ø¹ Ø¢Ù¾Ø¯ÛŒØª Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ù†Ø§ÙˆØ¨Ø±ÛŒ
        function updateNavButtons() {
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            
            prevBtn.disabled = currentQuestionIndex === 0;
            prevBtn.style.opacity = prevBtn.disabled ? '0.5' : '1';
            
            nextBtn.disabled = currentQuestionIndex === currentQuestions.length - 1;
            nextBtn.style.opacity = nextBtn.disabled ? '0.5' : '1';
        }

        // ØªØ§Ø¨Ø¹ Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ
        function nextQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                showQuestion();
            }
        }

        // ØªØ§Ø¨Ø¹ Ø³ÙˆØ§Ù„ Ù‚Ø¨Ù„ÛŒ
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showQuestion();
            }
        }

        // ØªØ§Ø¨Ø¹ Ø§Ø±Ø³Ø§Ù„ Ø¢Ø²Ù…ÙˆÙ†
        function submitQuiz() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            // Ø¨Ø±Ø±Ø³ÛŒ Ø³ÙˆØ§Ù„Ø§Øª Ø¨ÛŒâ€ŒÙ¾Ø§Ø³Ø®
            const unanswered = [];
            for (let i = 0; i < userAnswers.length; i++) {
                if (userAnswers[i] === null) {
                    unanswered.push(i + 1);
                }
            }
            
            if (unanswered.length > 0) {
                const confirmSubmit = confirm(
                    `âš ï¸ Ø¨Ù‡ ${unanswered.length} Ø³ÙˆØ§Ù„ Ù¾Ø§Ø³Ø® Ù†Ø¯Ø§Ø¯Ù‡â€ŒØ§ÛŒØ¯:\nØ³ÙˆØ§Ù„Ø§Øª: ${unanswered.join(', ')}\n\nØ¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¢Ø²Ù…ÙˆÙ† Ø±Ø§ Ù¾Ø§ÛŒØ§Ù† Ø¯Ù‡ÛŒØ¯ØŸ`
                );
                if (!confirmSubmit) {
                    startTimer();
                    return;
                }
            }
            
            showResults();
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ù†ØªØ§ÛŒØ¬
        function showResults() {
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('results-container').style.display = 'block';
            
            // ØªÙ†Ø¸ÛŒÙ… Ø¹Ù†ÙˆØ§Ù† ØµÙØ­Ù‡ Ù†ØªØ§ÛŒØ¬
            let resultTitle = '';
            switch(currentExamType) {
                case 'user':
                    resultTitle = "ğŸ¯ Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ† Ú©Ø§Ø±Ø¨Ø± Ø±Ø§ÛŒØ§Ù†Ù‡";
                    break;
                case 'typing':
                    resultTitle = "âŒ¨ï¸ Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ† ØªØ§ÛŒÙ¾ Ø±Ø§ÛŒØ§Ù†Ù‡";
                    break;
                case 'blackwhite':
                    resultTitle = "âš«âšª Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ† Ø³ÛŒØ§Ù‡ Ùˆ Ø³ÙÛŒØ¯";
                    break;
                default:
                    resultTitle = "ğŸ“Š Ù†ØªØ§ÛŒØ¬ Ø¢Ø²Ù…ÙˆÙ†";
            }
            document.getElementById('result-lesson-title').textContent = resultTitle;
            
            // Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù†ØªØ§ÛŒØ¬
            let correctCount = 0;
            
            for (let i = 0; i < currentQuestions.length; i++) {
                const question = currentQuestions[i];
                const userAnswer = userAnswers[i];
                
                if (userAnswer !== null && userAnswer === question.correctIndex) {
                    correctCount++;
                }
            }
            
            const totalQuestions = currentQuestions.length;
            const percentage = Math.round((correctCount / totalQuestions) * 100);
            const isPassed = correctCount >= 6;
            
            // Ù†Ù…Ø§ÛŒØ´ Ø®Ù„Ø§ØµÙ‡ Ù†ØªØ§ÛŒØ¬
            const summaryElement = document.getElementById('summary');
            let resultMessage = `ğŸ¯ Ø¯Ø±Ø³Øª: ${correctCount} Ø§Ø² ${totalQuestions} | ğŸ“Š Ø¯Ø±ØµØ¯: ${percentage}%`;
            
            if (isPassed) {
                resultMessage += " âœ… Ù‚Ø¨ÙˆÙ„ Ø´Ø¯ÛŒØ¯!";
                summaryElement.classList.add('pass-animation');
            } else {
                resultMessage += " âŒ Ù…Ø±Ø¯ÙˆØ¯ Ø´Ø¯ÛŒØ¯!";
                summaryElement.classList.remove('pass-animation');
            }
            
            summaryElement.textContent = resultMessage;
            
            // Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§
            updateAnswerStatus();
            
            // Ù†Ù…Ø§ÛŒØ´ Ø§ÙˆÙ„ÛŒÙ† Ø³ÙˆØ§Ù„ Ø¯Ø± Ù†ØªØ§ÛŒØ¬
            currentQuestionIndex = 0;
            createResultNumberButtons();
            showResultQuestion();
        }

        // ØªØ§Ø¨Ø¹ Ø¨Ù‡â€ŒØ±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ÙˆØ¶Ø¹ÛŒØª Ù¾Ø§Ø³Ø®â€ŒÙ‡Ø§
        function updateAnswerStatus() {
            let correctCount = 0;
            let incorrectCount = 0;
            let unansweredCount = 0;
            
            for (let i = 0; i < currentQuestions.length; i++) {
                if (userAnswers[i] === null) {
                    unansweredCount++;
                } else {
                    const question = currentQuestions[i];
                    if (userAnswers[i] === question.correctIndex) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            }
            
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('incorrect-count').textContent = incorrectCount;
            document.getElementById('unanswered-count').textContent = unansweredCount;
        }

        // ØªØ§Ø¨Ø¹ Ù†Ù…Ø§ÛŒØ´ Ø³ÙˆØ§Ù„ Ø¯Ø± Ù†ØªØ§ÛŒØ¬
        function showResultQuestion() {
            if (currentQuestionIndex >= currentQuestions.length) return;
            
            const question = currentQuestions[currentQuestionIndex];
            document.getElementById('result-question').textContent = `Ø³ÙˆØ§Ù„ ${currentQuestionIndex + 1}: ${question.question}`;
            
            // Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®Ù„ÙˆØ· Ø´Ø¯Ù‡
            const displayOptions = question.shuffledOptions || question.options;
            const correctIndex = question.correctIndex;
            const userAnswer = userAnswers[currentQuestionIndex];
            
            // Ù„Ø§Ú¯ Ø¨Ø±Ø§ÛŒ Ø¯ÛŒØ¨Ø§Ú¯
            console.log(`Ù†Ù…Ø§ÛŒØ´ Ø³ÙˆØ§Ù„ ${currentQuestionIndex + 1}:`);
            console.log(`- Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­ Ø´Ø§Ø®Øµ: ${correctIndex}`);
            console.log(`- Ù¾Ø§Ø³Ø® Ú©Ø§Ø±Ø¨Ø±: ${userAnswer}`);
            console.log(`- Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§:`, displayOptions);
            
            for (let i = 0; i < 4; i++) {
                const btn = document.getElementById(`result-option-${i}`);
                if (displayOptions[i]) {
                    btn.textContent = displayOptions[i];
                    btn.style.display = 'flex';
                    
                    // Ø­Ø°Ù Ú©Ù„Ø§Ø³â€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ
                    btn.classList.remove('correct', 'incorrect', 'selected');
                    
                    // Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ù¾Ø§Ø³Ø® ØµØ­ÛŒØ­
                    if (i === correctIndex) {
                        btn.classList.add('correct');
                    }
                    
                    // Ù†Ø´Ø§Ù† Ø¯Ø§Ø¯Ù† Ù¾Ø§Ø³Ø® Ø§Ø´ØªØ¨Ø§Ù‡ Ú©Ø§Ø±Ø¨Ø±
                    if (userAnswer === i && i !== correctIndex) {
                        btn.classList.add('incorrect');
                    }
                } else {
                    btn.style.display = 'none';
                }
            }
            
            updateResultNumberButtons();
        }

        // ØªØ§Ø¨Ø¹ Ø§ÛŒØ¬Ø§Ø¯ Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ø¯Ø± Ù†ØªØ§ÛŒØ¬
        function createResultNumberButtons() {
            const container = document.getElementById('result-numbers');
            container.innerHTML = '';
            
            for (let i = 0; i < currentQuestions.length; i++) {
                const button = document.createElement('button');
                button.textContent = i + 1;
                button.className = 'number-btn';
                button.onclick = () => {
                    currentQuestionIndex = i;
                    showResultQuestion();
                };
                container.appendChild(button);
            }
            
            updateResultNumberButtons();
        }

        // ØªØ§Ø¨Ø¹ Ø¢Ù¾Ø¯ÛŒØª Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø´Ù…Ø§Ø±Ù‡ Ø¯Ø± Ù†ØªØ§ÛŒØ¬
        function updateResultNumberButtons() {
            const buttons = document.querySelectorAll('#result-numbers .number-btn');
            buttons.forEach((btn, index) => {
                btn.classList.remove('selected', 'correct', 'incorrect');
                
                if (index === currentQuestionIndex) {
                    btn.classList.add('selected');
                } else if (userAnswers[index] !== null) {
                    const question = currentQuestions[index];
                    if (userAnswers[index] === question.correctIndex) {
                        btn.classList.add('correct');
                    } else {
                        btn.classList.add('incorrect');
                    }
                }
            });
        }

        // ØªØ§Ø¨Ø¹ Ø³ÙˆØ§Ù„ Ø¨Ø¹Ø¯ÛŒ Ø¯Ø± Ù†ØªØ§ÛŒØ¬
        function nextResultQuestion() {
            if (currentQuestionIndex < currentQuestions.length - 1) {
                currentQuestionIndex++;
                showResultQuestion();
            }
        }

        // ØªØ§Ø¨Ø¹ Ø³ÙˆØ§Ù„ Ù‚Ø¨Ù„ÛŒ Ø¯Ø± Ù†ØªØ§ÛŒØ¬
        function prevResultQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                showResultQuestion();
            }
        }

        // ØªØ§Ø¨Ø¹ Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ Ù…Ù†Ùˆ
        function backToMainMenu() {
            if (timerInterval) {
                clearInterval(timerInterval);
                timerInterval = null;
            }
            
            currentQuestions = [];
            currentQuestionIndex = 0;
            userAnswers = [];
            
            document.getElementById('main-menu').style.display = 'flex';
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('results-container').style.display = 'none';
        }

        // ØªØ§Ø¨Ø¹ Ø´Ø±ÙˆØ¹ Ù…Ø¬Ø¯Ø¯ Ø¢Ø²Ù…ÙˆÙ†
        function startSameExamAgain() {
            backToMainMenu();
            setTimeout(() => {
                if (currentExamType) {
                    startRandomExam(currentExamType);
                }
            }, 100);
        }

        // Ù…Ø¯ÛŒØ±ÛŒØª Ø±ÙˆÛŒØ¯Ø§Ø¯Ù‡Ø§ÛŒ ØµÙØ­Ù‡ Ú©Ù„ÛŒØ¯
        document.addEventListener('keydown', function(event) {
            // Ø¯Ø± ØµÙØ­Ù‡ Ø¢Ø²Ù…ÙˆÙ†
            if (document.getElementById('quiz-container').style.display !== 'none') {
                if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {
                    event.preventDefault();
                    prevQuestion();
                } else if (event.key === 'ArrowRight' || event.key === 'ArrowDown') {
                    event.preventDefault();
                    nextQuestion();
                }
                
                if (event.key >= '1' && event.key <= '4') {
                    const index = parseInt(event.key) - 1;
                    selectOption(index);
                }
            }
            
            // Ø¯Ø± ØµÙØ­Ù‡ Ù†ØªØ§ÛŒØ¬
            if (document.getElementById('results-container').style.display !== 'none') {
                if (event.key === 'ArrowLeft' || event.key === 'ArrowUp') {
                    event.preventDefault();
                    prevResultQuestion();
                } else if (event.key === 'ArrowRight' || event.key === 'ArrowDown') {
                    event.preventDefault();
                    nextResultQuestion();
                }
            }
            
            // Ø¯Ø± ØµÙØ­Ù‡ ÙˆØ±ÙˆØ¯
            if (document.getElementById('login-container').style.display !== 'none' && event.key === 'Enter') {
                event.preventDefault();
                checkPassword();
            }
            
            // Ctrl+Enter Ø¨Ø±Ø§ÛŒ Ù¾Ø§ÛŒØ§Ù† Ø¢Ø²Ù…ÙˆÙ†
            if (event.ctrlKey && event.key === 'Enter' && document.getElementById('quiz-container').style.display !== 'none') {
                event.preventDefault();
                submitQuiz();
            }
            
            // Escape Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø²Ú¯Ø´Øª
            if (event.key === 'Escape') {
                if (document.getElementById('quiz-container').style.display !== 'none') {
                    if (confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø¢Ø²Ù…ÙˆÙ† Ø±Ø§ Ø±Ù‡Ø§ Ú©Ù†ÛŒØ¯ØŸ')) {
                        backToMainMenu();
                    }
                }
            }
        });
    </script>
</body>
</html>
